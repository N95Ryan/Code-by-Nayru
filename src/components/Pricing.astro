---
import { getTranslator } from "../i18n";

interface Props {
  lang: "fr" | "en";
}

const { lang } = Astro.props;
const t = getTranslator(lang);

interface PriceRow {
  type: string;
  duration: string;
  france: string;
  international: string;
}

const priceRows: PriceRow[] = [
  {
    type: t("pricing.rows.0.type"),
    duration: t("pricing.rows.0.duration"),
    france: t("pricing.rows.0.france"),
    international: t("pricing.rows.0.international"),
  },
  {
    type: t("pricing.rows.1.type"),
    duration: t("pricing.rows.1.duration"),
    france: t("pricing.rows.1.france"),
    international: t("pricing.rows.1.international"),
  },
  {
    type: t("pricing.rows.2.type"),
    duration: t("pricing.rows.2.duration"),
    france: t("pricing.rows.2.france"),
    international: t("pricing.rows.2.international"),
  },
  {
    type: t("pricing.rows.3.type"),
    duration: t("pricing.rows.3.duration"),
    france: t("pricing.rows.3.france"),
    international: t("pricing.rows.3.international"),
  },
];
---

<section id="pricing" class="py-20 text-white">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">
      {t("pricing.title")}
    </h2>
    <div
      class="grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 max-w-5xl mx-auto animate-fade-in"
    >
      {
        priceRows.map((row, i) => (
          <div
            class="bg-white/5 backdrop-blur-sm border border-white/30 rounded-2xl p-6 hover:scale-105 transition-all duration-300 flex flex-col items-center text-center animate-fade-in h-full"
            style={`animation-delay: ${i * 0.1}s`}
          >
            <div class="flex flex-col justify-start items-center w-full min-h-[64px]">
              <h3 class="text-lg sm:text-xl font-bold mb-1">{row.type}</h3>
              <div class="text-sm text-gray-400 mb-4 min-h-[24px]">
                {row.duration}
              </div>
            </div>
            <div class="flex flex-col gap-2 w-full flex-grow justify-center">
              <div class="flex flex-col items-center">
                <span class="text-xs text-gray-400">
                  {t("pricing.labels.france")}
                </span>
                <span class="text-3xl font-bold text-indigo-400">
                  {row.france}
                </span>
              </div>
              <hr class="my-2 border-t border-white/20 w-2/3 mx-auto" />
              <div class="flex flex-col items-center">
                <span class="text-xs text-gray-400">
                  {t("pricing.labels.international")}
                </span>
                <span class="text-3xl font-bold text-indigo-400">
                  {row.international}
                </span>
              </div>
            </div>
          </div>
        ))
      }
    </div>
    <div class="mt-12 text-center">
      <p class="text-gray-300 mb-6">
        {t("pricing.description")}
      </p>
    </div>
  </div>
</section>
